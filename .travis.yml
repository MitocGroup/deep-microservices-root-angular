language: node_js
sudo: required
node_js:
  - '4.3'
  - '6.10'
  - '7.7'
cache:
  edge: true
  directories:
    - $(npm root -g)
    - node_modules
    - deep_modules
    - $(npm config get prefix)/bin
branches:
  only:
    - master
    - dev
    - stage
    - test
before_install:
  - cp bin/test/package.json .
after_success:
  - npm run coverage
after_script:
  - npm run remove-coverage
env:
  global:
    - MAJOR_VERSIONS=master
    - DEEP_NO_INTERACTION=1
    - E2E_TESTING=none
    - secure: 
        E6n/1PAzTNbA+TYB41sdr2ywkEA9gmANvVpE1D9p+0hkS6/jWzmXghohi/ng+WiklgHKbZDrcg5o97YhHNu/D4bJMeCLr6HHM13KJmKXP4C0vFQLEfQUAJfztgqcpZ+c6FbFTt9f8iRHhDpAv7Cuk20qSwmVZnCqoTDRI0ijiquN+sxlh/bknn6RikWXh9c1PaeG0wnLp0oX5eeviEM1BVcd5TkmXPAqTY2UMmpj2ueZn9WJDlx6F+c5mGNJer0q8lz+StRuBZrCy531qLvU4XcHj70v7PGOCdFzP2V6E9cd4zBrAvlrPtwXefluMNq+XEH+CMkHv7kJ3u+yo1NAhY33IJE9T7yF1GVOgbvjJglqlR1seJRd1bp8PJoluRfm1ete4RiYtJRDdRD+oaxtZ28e4wFDg/khA0lSvb5Urll9ukFF0cBVqG2UN2aQ91tLPy+4jQQ6Mk+bBrDRO4LBaPABOSizPBc72dRsWJx3gGjoK50RtsIjtv1EnWGgIEldpYhX6JPndeSEaqs7sSn55da2ExJw5Cs2onOF4Td/x6cpEvgk9YTKwn2fuJ8gh/P2yvfMS4JtFDnuqG2k9jDFn38HYA8hJ3G67htHgE74FbCf7QNLCzSCm3CR5S2VRt14OHqSGCVGOVWOgOapozwhkPcOcIL6YKynot1/xPqicZg=
    - secure: 
        DD8uyG4qHQaLVkucj1ZsdPc6nmajdFTWwI55EiEwofMOTYIZQSnGjRCGbxB1EqBmsUZt7RuWAraKnj6DbY5dZvNElcCJGpC3gFxFFWT840dWRynNf/TYr3Vn5tbl3mHVwFUYNJXN0Gc8NRfvzahOXVKZvIxUCgbgR/m/BY26xEkAsiT4JMyLD0z9IrbivPfzjURYJN+nByNAF7l9Y0JxQ9ffgityCTmcbeixE5pyAwqYdJZMiYvJBt/Y8K5Tb7ZYL0CcZ/GA+lFF+qXazNVdmKgzEMUd7mG0ZQnQh1E4H5C5TiB5PwI9qJzDofCLV/CNtgrWoRcAw7hUCcyqSvyYyqx3BDTmCJUyp4WQpdYJkb32vshMxxVd9OXgbOk2AskjyTx5JANt4RfAQA6zVlgfVuCPeCm2wIqaDbLpCLBdo3BWX4X12Hg/+70RkcfC/s1wU79V5a/bohPa3U9m0QU7aRnUmum4CzkhLX5RzioCkV2j/pzceEr9JU9+EhLSrC02GEnnqCDJWwCgloKWsSv5ohFEnwwHm5+L0zrvESujIPLC+l8lRQHxfTswRhG8wRGBKY+Onztn7jfWwK5XJuS1SLefGC1rx0r0TZhLDcsx9UJTrXuDlLK0gMYYw6t9DlMF+bftf9MGxxQUfveRdfQ3pRYQrWUcJdm8XcYQ3E8tmW8=
    - secure: 
        bP8zG3t5JYGYdrZdXwQAUxyeqNh9W262sboIjqn+8faOPySZzgRyU/60HiXz7fSL3HFJ0CP/oDjd14IwdNLbY+2SQF50Eu3nZcxsSD56nWzHHjj5kC+8W2rSQ4ko41t5v6ThLLJgYR+AuEu5oCBVXqwCpFAsmXKlvHqa/zyqtGeZEPACijewPcktPCrmrasOxh48QzZM7wB1DgLiinLfeklwQoXwQ+TPSm82R2L7tb09P1BMptqb2IXNBTk40zq74EjpIGoYT5zCuaTAaUO93bh6XQ58aXC40yYGWBImTPrIF25HTzkAmZXYHbUVIoYYaBRB75W/Q3JQcP1S2IUdUj3DRiXg6S+fXbDhysIhgPXuyH3meehDoPUUWEUyQfdCNNIrWezeOtZk1M4YHBjZzi08dkMg/z/gOAMdWFpruyV51gbp/gthhTSBKa77WLwsVzP3ARhIZIMGA8xwQFKe1kFWDy7Ff+LAo+NKpIL0cFAPzpcgfEu3L36SomoLjNLYxhPNVe8QhvVcDeW8umDXxxq1x/Wyud4jcCnHdh+FJQdD5CN7IKL8uq/YfI9g+Q9gcyrGZOku1OsBjYvbT7VUwIgkgheQ+qWN5EEMnN7WrnGZnfSufAkHsehTkWISUG/E7DekVIKBeYCuqxqVSXoZxT8sIHKHfX1q5IONDiGSAU8=
    - secure: 
        Oh8NQT3Etm0YiKzC04NpKCZNnM+sKhJFuaBfNJRNymB3N04xNmv63V2I6pkLSBnSCG+3Hz1j1R4M+JtGFWpmTMn+bEzz8kT826C3crKSTCXh06p2IC/mq/Byj2v2S6+L6j61aZlw1/UIDNcUbHLC82MY03wEEpH30En2dS97bOZ2K6XQUS7OMbB3CNqdL98rj3gkh6Ha1qsVSzqp6sqLr6VBfVCd+baNmbQy0ukAu1U6aiPwX5ZeabS4gVR2ecMHYNdSaG8NKQ6ejr7lX9qf38jNb/VCR3fBFcYQfdomCB2awyzbLztFzuFZv0HDMzn0v6ciEAexQd4+eLVXlUo1liJSjIQh2PGAxzdO62XnoQ9D/M0nnRiJeowhf3gxL1m5Lb8FBkdjQoyG2qbwgj+AT5fobfOw/FKyQkmeu9gdowYwmNGk1HvwWNhCbWtzzlOe43Kt+uakLz6dBtVoXyPblt6jhSgzzrIlOudzUYBc4pcvtrWEonEQ162udUwX7JCsJnoGjE42GnLb/QtjQ/HptmnCxE+ScYrLDZo7I3MxqJIJY5a3vt1i2CJ9KCCzoG49+t5W2XXXHE+25Qrx2Ye9svlNxwPfLZR8AEjg6R4Wlq03xPqCAi6AO7kgP6SxpmfJnt5NnteRk7KYpzoFsV+fQ5Ye58usxVO62Nq2iDXl30Q=
    - secure: 
        G/hH5bFGwL8aQqZuYmPH2USOre8FHdDUq5GHtFvONoP7CDC6fks+h5fApUhZ35YntE877hB0fDwNONQcfVfFpheVuXsY0uSbuRxyzF9uvpDMXQP+f4SwNI6qFVM+W/5SiyvWRc8grdDRW4Hkx5f5ALDQqIfly8a+dK82o2K7wcwGzdhPzDBxgtVfRhJBQWPiGC5qAU8F60y0XM/RY2PXCUjFkOtzokv/QlbL9Jxeju1YtBSQkn37iruNKy2Y38MZn4xcFLO9TNkoDzqVJ/OHpqbuc1taJkzKaeKWWHGWYJqA9j0t0pLKgL653hRh4Sb33seBzIa5EUv9a2r3ZVyJ7warfzoBlsWdkBtSBG0jT10dD+x2xMpm2+xW85l3HKULg4Livnqd0ipYCJE0wwxdsPF8Sa24iws5+jI2BJ2ZL9vaXEsbUBcPwQIXDaR0W3l6aeosJsE4sY88x2nT4f88mj+TMLjWqDW8lz2XH5xUa28cvt3A8odq5+NZsln/8iQOi0syOQOdixueNFKYnTZW0dlJriJ7RIgbm/0Nh3LpQJ9h1haW/FEbqtpm4iyn86qhUIdGnGNYADvcf82UVeQsrHiXSaSyLIdEu7+XOR5K51XBgqbbS3Zne4byCbhNLtwPy3TmxUjiuDEI+7ezehphrabxHHJdHB84Tgh6FzRqMYU=
    - secure: 
        N4Mh3jmnwYhfgOkfhRIPytH0Re1nuAdvSpzXbmpraFMK44CLSv1CirniZR5X+/Lesrcpzxv2FQUxACTV/jMhPA09mfP3jLaP3mKIrqCPr6TFX4GjJYo0dMoyzEWVp+aVfzcIzF0SInVp7GkEiI8hhIhNlpYzqs9XkegyCkPeDzm8YBD0hyqcewytMj2ZftwrnUztl6DQKrGAh/Og+L0ECzUxekNc5CnWTxXJ0PgPn33u9SL0B9DBlwerWO+Q1H623Mot98R0TCM45P7T+oWs/qbd5xloyyYUn/Eec6EOhw9GZQogq0DfxA6ADG12sck27V+Qx5AGuKHCsWFUXxepGIJsBAlDuwqKV8mQm8sx6Z+p4EH4Yg/FQLh36O7htLThXzd2rifBMmCI/jqPY4JJpRSf7PYjaNWF5Os4HOe3UXlAUFDtgbOFzqhsDpjKXVxUmgA/gWcZ1aepFDIik2MiW6H1FCTsKpKKAcg3f4Hm3Jykkw0JJrzhxug26R2lRTnWsF0ofxyvBwor8o37RTKsGvVpX797TwMmygeH5E2i5Cfk9zKEGhK2NHiTUQB4lYCso5BdHwbEPcPqrd3GwLJaEm4TVtWm9SzDum1bKWfM9f208MTjVFZCUmHRkUxFtKC42A5UHZrcO2KsqJEAT8BQ7RGYE5qn16TF1okiVMsG8os=
    - secure: 
        c6m7X/z/gL1hyV0Iod1h+VhSg92u7CH92fjDwgHt+wELJi3D0upneXoUzw2XUlrF3QSctNqVbfxuCnLxhMEE/Mn/3QvFqO8MIjc9RFSVxQbb0bvbtUsH9LwCQcQZCS+fN6SnDLu3ApUrHDh57QECl7ileL7xvHpUpA9p8FwPobZ7TYfh4Ki02iWXoKzdNsjI1R8pugiovffMbr8OoydPBxlcVxbiy6c8V7I9fyBlM4eKPy1Wzq2fMxJw+lUr7q/iWpYpZuxNbNhAbGTCsKKhQUX27MRGSUEcLRlmFhOyGJB3EWiBMHoc3I654o+396FHM4BsWFy+s5uH724s2IdSZNu6q9yvl6PU/A34tz316AR6Kv39E+k4F8LOIcS5eHU9iePic/OP4Zqu3gFEcHmDKuLoT3gBsvyjQWBuelqILkTRux5co/WsuwbM0TZot6Yd4PfMRZ2hjDIP6vKbOfRIeqizRzyKE16qtWIVbhsLU9qPrOMMz7sAamVmmGkjNi8gliWbpuSD77UgFLPRxdI2hVA8KwDSHDsQ0tXt+A2SzgTrbVYLKUTiT/ghDVNlUx8077ThcmtuETCekU4oUIk642yO+nqAv1LRnPXqZoQs8kL1xQroxfRCSNI2ETdWJSySso6yC9SRFPHUgQb8koomIl/y0taZ7WuR8+ZTLR9hH3g=
    - secure: 
        W5L7aWqXbmV3yvTlGgKCwyZ6GufXzzSCAAgOO2BvoDRZxFA5kQQSEestg+aFttJBsxKfLRgBX1CO3fPSW5nwSkYQLWHpy62tZVpVm6UBgGF1uOdDq68Df0TPgELCR4RLZRABNfBn6/6T8LNLhMLLn8QVXuuzi5v2OL4kkmrB0c1tIWQAMEy6u/1itcez/bFkMAgrJchsyl6HxUe+XRaEWjm23PGY0qz6rNJPBWp98155ijPLc16rnSVj2FtVkYI2t0sz5v574DNmga4EnfsRe2GFBcHoMJ0UkeOKr+zaWnk3UaW6fC2O67sHR1xJQOMybUQu+azDPo/Ns/66RjbYAZk10/s8xBw8HO/g/N6antE5z640AJ3iiBrY+zD0tkVzesYjsDEgYy40n7zvOfGwJHpJ5V5FsKd2s6VQ1Hh5r5UkyqoEaehK0Bosr/fs8j/ueyjr9bJAnHv/hVpLWEKlwWgqTKSYcPEYoVZKBzpYTsBj5Y4L+zEMamfhVbjwGD0GdWM2wdThPFrcza8IorTsDVKJCBWZBcBMmDaTndo8iur1n3DVJFh4cqWGUZAeSzU1G1O3jDC0wiboQrvajVUqEx1+OG7W7pJPu0xzK8t9xsuK9Dp08hJWqKP8Cupl1+eFJm+NlhJTv0mVEATOSHbe8OuX29qiOzCzYPytJrb3AX0=
  matrix:
    - TEST_SUITE=backend
    - TEST_SUITE=frontend
notifications:
  slack:
    secure: 
      nxsMCWLKLM4VayRt35/ztjiBTLxrn1qSIlDPCgb297TLwGKlj0I6mV+h785zvgO/A9fcBe971mP/MW+iVIjJ+S0vP9FE4rSjfqRFgvuRGjJfrWlYCU1D4hZiwlKuzSPabTYHtzFJpI8PazHY3e9MN1hYfnvX+82FBtXkd7Arp1beuS+JWEbxXNZPvvr5NYjd8rsP+wjQxoOGwH7XsRmNiwBGU8sTL79kaSEtdm1U3XiEMAUTTiNYbP02m5cIM/5WuP4kCfukJ58wh53+WPhcJkjl18rxw7vkysTWmkKa1D2NT2YngdDO33+hY2q1eOwsX/YiAK+gxooZLg71VqxqqpXa8yjK2w5sFDjAqjliRCDWkgfCfsr1X/9TzJuV9kYkTGL0ji6LUhT0287wp7ajmOTRtGQ178Tyatgl1oDuKb44nYu1O6p35scbF64hI536nEJ8C3HYxvpaIgXUTSERJKaC7TXQI5QyQ6ZB8RRt0rR7egdsgKoN2uVh5ayFhy5KCyoEHLqoutlFs17uSXnk07UDtct8EL989sx0/hNpT2aOB319KLAxOnX78A0OzUbbwWrwecCGCD2PjG76aiGBTlmQsIq4NUNfW0DyVXQ9SSFrJiP4def43cGFDeEHm58sIoBlX/eps+LHmNMx+2M2w1NV/YVXV0TXQp1wgmJt2kM=
